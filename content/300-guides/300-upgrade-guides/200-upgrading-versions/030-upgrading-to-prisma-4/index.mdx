---
title: 'Upgrade to Prisma 4'
metaTitle: 'Upgrade to Prisma 4'
metaDescription: 'Guides on how to upgrade to Prisma 4'
tocDepth: 2
toc: true
---

<TopBlock>

Prisma 4 introduces a number of **breaking changes** if you are upgrading from an earlier version (`3.x.x`). This guide explains how this upgrade might affect your application and gives instructions on how to handle any changes.

</TopBlock>

## Breaking changes

### Index configuration

### Scalar list defaults

For database connectors that support scalar lists (PostgreSQL, CockroachDB and MongoDB), Prisma 4 introduces the ability to set a default value in your Prisma schema file using the `@default` attribute:

<TabbedContent tabs={[<FileWithIcon text="Relational databases" icon="database"/>, <FileWithIcon text="MongoDB" icon="database"/>]}>
<tab>

```prisma highlight=3;normal
model User {
  id             Int      @id @default(autoincrement())
  posts          Post[]
  favoriteColors String[] @default(["red", "yellow", "purple"])
}
```

</tab>
<tab>

```prisma highlight=3;normal
model User {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  posts          Post[]
  favoriteColors String[] @default(["red", "yellow", "purple"])
}
```

</tab>
</TabbedContent>

This is a breaking change if you previously had defaults defined for scalar lists at the database level.

### Explicit `@unique` constraints on one-to-one relations

### Removing `references` syntax for implicit many-to-many relations

## Specific upgrade paths

<Subsections />

## Upgrading the <inlinecode>prisma</inlinecode> and <inlinecode>@prisma/client</inlinecode> packages to Prisma 4

To upgrade to Prisma 4 from a `3.x.x` version, you need to update both the `prisma` and `@prisma/client` packages. Both the `prisma` and `@prisma/client` packages install with a caret `^` in their version number. This allows upgrades to new minor versions, but not major versions, to safeguard against breaking changes.

To ignore the caret `^` and upgrade across major versions, you can use the `@4` tag when upgrading with `npm`, or `yarn`:

<Admonition type="alert">

Before upgrading, check each **breaking change** to see how the upgrade might affect your application.

</Admonition>

<TabbedContent tabs={[<FileWithIcon text="npm" icon="file"/>, <FileWithIcon text="yarn" icon="file"/>]}>

<tab>

```terminal
npm install prisma@4 @prisma/client@4
```

</tab>

<tab>

```terminal
yarn upgrade prisma@4 @prisma/client@4
```

</tab>

</TabbedContent>
